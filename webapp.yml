---
 - hosts: prod
   vars:
      version: test
   tasks:
   - name: pull docker images from registry
     raw: docker pull sreedevops26/mydevops:"{{version}}"

   - name: remove docker container if already exists
     raw: docker rm -f webapp 
     ignore_errors: true

   - name: bringup container
     raw: docker run -dti --name webapp -p 80:80 sreedevops26/mydevops:"{{version}}" /bin/bash

   - name: restart docker container after deploying app
     raw: docker restart webapp
